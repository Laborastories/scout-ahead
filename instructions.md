# League Draft Tool Implementation Plan

## Overview

A real-time web application that simulates the League of Legends competitive
draft process, supporting both individual games and full series (Best of 3/Best
of 5). The tool allows two team captains to perform champion picks and bans in
the official competitive format, while others can spectate the process. Each
series generates unique URLs for team captains and spectators that persist
across multiple games. When fearless draft mode is enabled, the system tracks
picked champions across games, preventing their reuse in subsequent games of the
series. Teams can select their preferred side (blue/red) for each game according
to competitive rules. The system ensures proper turn order, prevents invalid
selections, and maintains synchronization across all viewers through real-time
updates.

## URL Structure and Navigation

### Base URL Patterns

```
Blue Captain: /draft/{series_id}/game-{game_number}/blue/{auth}
Red Captain: /draft/{series_id}/game-{game_number}/red/{auth}
Spectator: /draft/{series_id}/game-{game_number}
```

### URL Generation Flow

- On series creation:
  - Generate unique series_id
  - Generate auth tokens for both teams
  - Create game-1 URLs
- After each game:
  - Maintain same series_id and auth tokens
  - Increment game number
  - Generate new game URLs automatically
- Side selection may swap blue/red URLs for teams

### Navigation Features

- Inter-game navigation bar
- Quick links to previous games in series
- Current game highlight
- Series score display
- Side indicator for each game

## Series Management

### Series Configuration

- Best of 1, Best of 3, or Best of 5 selection
- Initial side selection - type in team name for blue or red
- Fearless draft mode toggle (optional)
- Track series score
- Persist draft history across games

### Between-Game Management

- Side selection for next game
  - Track side selection history
- Display previous game picks/bans
- Show unavailable champions from previous games
- Series score display
- Next game initialization

### Champion Pool Management

- If fearless draft enabled:
  - Track all picked champions across games
  - Automatically remove picked champions from available pool
  - Display picked champions in series history
  - Maintain separate tracking for bans (game-specific) and picks (series-wide)
- If standard draft:
  - Reset champion pool each game
  - Only track bans for current game
  - Display pick history for reference only

### Series State Persistence

- Store complete series configuration
- Track game-by-game history
- Maintain side selection history
- Record pick/ban sequences
- Series score tracking
- Generate summary data

## Core Features & Architecture

### Server Architecture

- WebSocket connections for real-time updates (via Wasp's built-in websocket
  features)
- Draft state management
- Role-based access (blue captain, red captain, spectator) (no users in DB, it's
  all generated by urls and auth codes)
- Generate unique URLs for each role

### Database Schema

- Draft sessions
- Team information
- Pick/ban history
- Authentication tokens

### Interface Components

#### Team Setup Page Features

- Input fields: Blue team, Red team, Match name
- Submit generates 3 URLs (blue captain, red captain, spectator)

#### Captain View Features

- Champion grid with search and filtering by role (top, jungle, mid, bot,
  support)
- Pick/ban slots UI showing phases
- Timer display
- Ready/confirm button
- Current phase indicator
- Locked-in picks/bans
- Real-time updates when opponent acts
- Validation preventing:
  - Picking banned champions
  - Picking already selected champions
  - Acting out of turn
  - Acting before opponent confirms

#### Spectator View Features

- Read-only champion grid with same search and filtering by role
- Live updates of picks/bans
- Phase progression display
- Timer view
- Both teams' selections visible
- Search still functional but no select ability

### State Management

- Track:
  - Current phase
  - Turn owner
  - Selected champions
  - Banned champions
  - Ready states
  - Time remaining
  - Session status
- Handle disconnects/reconnects
- Persist state for session duration

### Real-time Communication

- WebSocket events for:
  - Pick/ban selections
  - Ready state changes
  - Phase transitions
  - Timer updates
  - Session status changes
- Reconnection handling
- State synchronization

## Draft Sequence

### Phase 1: First Ban Phase (6 bans)

1. Blue Ban 1
2. Red Ban 1
3. Blue Ban 2
4. Red Ban 2
5. Blue Ban 3
6. Red Ban 3

### Phase 2: First Pick Phase (6 picks)

7. Blue Pick 1
8. Red Pick 1
9. Red Pick 2
10. Blue Pick 2
11. Blue Pick 3
12. Red Pick 3

### Phase 3: Second Ban Phase (4 bans)

13. Red Ban 4
14. Blue Ban 4
15. Red Ban 5
16. Blue Ban 5

### Phase 4: Second Pick Phase (4 picks)

17. Red Pick 4
18. Blue Pick 4
19. Blue Pick 5
20. Red Pick 5

### Action Requirements

- Active team captain makes selection
- Clicks lock in
- If they fail to lock in before the time limit, hold the timer at that phase so
  they can lock something in.
- Other team sees selection
- Phase auto-advances when confirmed
- All views update in real-time
- Spectators see all actions as they happen

## Additional Series-Specific Requirements

### Between-Game Flow

- Display series score
- Show side selection interface for next game
- Present champion availability
- Countdown/ready check for next game
- Display pick history across games

### Series History Display

- Show all previous games' drafts
- Track side selection history
- Display banned champions (per game)
- Display picked champions (series-wide)
- Show win/loss record

### Series Completion

- Display final series result
- Show complete draft history
- Provide series summary
- Option to export series data
- Archive series data

## Summary of Actions Per Game

- 10 Bans (5 per team)
- 10 Picks (5 per team)
- 20 total sequential actions
- Each requiring confirmation
- No simultaneous actions

## UI/Aesthetic

- Clean, minimal, sophisticated design
- Similar to Valorant design (bold fonts, edgy but not corny, dark theme)
